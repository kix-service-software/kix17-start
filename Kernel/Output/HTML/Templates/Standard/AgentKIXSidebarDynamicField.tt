# --
# Copyright (C) 2006-2023 c.a.p.e. IT GmbH, https://www.cape-it.de
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file LICENSE for license information (AGPL). If you
# did not receive this file, see https://www.gnu.org/licenses/agpl.txt.
# --


<div id="DynamicField" class="WidgetSimple [% Data.View %] CanDrag">
    <div class="Header">
        <div class="WidgetAction Toggle" title="[% Translate("Show or hide the content.") | html %]" id="KIXSidebarCustomerInfoBlockOpen" aria-controls="Core_UI_AutogeneratedID_0" aria-expanded="false"></div>
        <div class="ActionMenu">
            <div class="WidgetAction Settings">
                <a id="Dashboard0120-TicketNew-toggle" title="[% Translate("Settings") | html %]">
                    <i class="fa fa-gear"></i>
                </a>
            </div>
        </div>

        <h2><span>[% Translate(Data.Title) | html %]</span></h2>
    </div>
    <div id="DynamicFieldsTable" class="Content">

[% RenderBlockStart("DynamicFieldSelect") %]
        <form action="[% Env("CGIHandle") %]" method="post" enctype="multipart/form-data" name="KIXSidebarDynamicFieldSelect" id="KIXSidebarDynamicFieldSelect" class="Validate PreventMultipleSubmits Hidden">
            <input type="hidden" name="Action" value="KIXSidebarDynamicFieldAJAXHandler"/>
            <input type="hidden" name="Subaction" value="SelectDynamicFields"/>
            <input type="hidden" name="TicketID" value="[% Data.TicketID | html %]"/>
            <div class="ui-widget ARIARoleMain DynamicFieldSidebarSettingsContainer">
                <div>[% Translate("Select all dynamic fields that should be displayed.") | html %]</div>
                <div class="Content">
                    <fieldset class="TableLike">
                        <label for="DisplayedDynamicFields">[% Translate("Dynamic Fields") | html %]:</label>
                        <div class="Field">
                            [% Data.DynamicFieldSelectionStrg %]
                        </div>
                        <div class="Clear"></div>
                    </fieldset>
                </div>
            </div>
            <div class="Footer">
                <button id="SelectDynamicFields" class="CallForAction" accesskey="g" title="[% Translate("Update") | html %] (g)" type="button" value="[% Translate("Update") | html %]"><span><i class="fa fa-check"></i> [% Translate("Save Changes") | html %]</span></button>
            </div>
        </form>
[% RenderBlockEnd("DynamicFieldSelect") %]

[% RenderBlockStart("DynamicFieldEdit") %]
        <form action="[% Env("CGIHandle") %]" method="post" enctype="multipart/form-data" name="KIXSidebarDynamicFieldEdit" id="KIXSidebarDynamicFieldEdit" class="Validate PreventMultipleSubmits">
            <input type="hidden" name="Action" value="KIXSidebarDynamicFieldAJAXHandler"/>
            <input type="hidden" name="Subaction" value="Store"/>
            <input type="hidden" name="TicketID" value="[% Data.TicketID | html %]"/>
            <div class="ui-widget ARIARoleMain DynamicFieldSidebarEditContainer">
                <div class="Content">
                    <fieldset class="TableLike">
[% RenderBlockStart("DynamicFieldEditRow") %]
                        <div class="Row Row_DynamicField_[% Data.Name | html %]">
                            [% Data.Label %]
                            <div class="Field">
                                [% Data.Field %]
                            </div>
                            <div class="Clear"></div>
                        </div>
[% RenderBlockEnd("DynamicFieldEditRow") %]
                    </fieldset>
                </div>
            </div>
            <div class="Footer">
                <button id="UpdateDynamicFields" accesskey="g" title="[% Translate("Update") | html %] (g)" class="CallForAction" type="button" value="[% Translate("Update") | html %]"><span><i class="fa fa-check"></i> [% Translate("Update") | html %]</span></button>
                <span id="DynamicFieldsSaved" class="Hidden">
                    <img src="[% Config("Frontend::ImagePath") %]OK.png" border="2" alt="[% Translate("OK") | html %]" />
                </span>
            </div>
        </form>
[% RenderBlockEnd("DynamicFieldEdit") %]
[% RenderBlockStart("DynamicFieldDisplay") %]
    <div class="Content" id="KIXSidebarDynamicFieldDisplay">
        <fieldset class="TableLike FixedLabelSmall">
[% RenderBlockStart("DynamicFieldContent") %]
            <label>[% Translate(Data.Label) | html %]:</label>
[% RenderBlockStart("DynamicFieldContentNotSet") %]
            <p class="Value" title="[% Data.Title | html %]">&lt;[% Translate("Not set") | html %]&gt;</p>
[% RenderBlockEnd("DynamicFieldContentNotSet") %]
[% RenderBlockStart("DynamicFieldContentRaw") %]
            <p class="Value" title="[% Data.Title | html %]">[% Data.Value %]</p>
[% RenderBlockEnd("DynamicFieldContentRaw") %]
[% RenderBlockStart("DynamicFieldContentQuoted") %]
            <p class="Value" title="[% Data.Title | html %]">[% Data.Value | html %]</p>
[% RenderBlockEnd("DynamicFieldContentQuoted") %]
[% RenderBlockStart("DynamicFieldContentLink") %]
            <p class="Value" title="[% Data.Title | html %]">
                [% Data.HTMLLink %]
            </p>
[% RenderBlockEnd("DynamicFieldContentLink") %]
[% RenderBlockStart("DynamicFieldContentCheckbox") %]
            <p class="Value" title="[% Data.Title | html %]">
                <input type="Checkbox" [% Data.Value %] disabled="disabled">
                </input>
            </p>
[% RenderBlockEnd("DynamicFieldContentCheckbox") %]
[% RenderBlockStart("DynamicFieldContentTime") %]
            <p class="Value" title="[% Data.Title | html %]">[% Data.Value | Localize("TimeLong") | html %]</p>
[% RenderBlockEnd("DynamicFieldContentTime") %]
            <div class="Clear">
                &nbsp;
            </div>
[% RenderBlockEnd("DynamicFieldContent") %]
        </fieldset>
    </div>
[% RenderBlockEnd("DynamicFieldDisplay") %]
    </div>
</div>

[% WRAPPER JSOnDocumentComplete %]
<script type="text/javascript">//<![CDATA[
    Core.KIX4OTRS.KIXSidebarDynamicField.Init();
//]]>
</script>
[% END %]